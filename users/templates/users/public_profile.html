{% extends 'blog/base/base.html' %}
{% load static %}

{% block content %}
<style>
  .min-h-screen {
    background: linear-gradient(to bottom, #f8f9ff 0%, #f0f2ff 100%);
    position: relative;
    overflow: hidden;
  }

  .min-h-screen::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 10% 20%, rgba(255, 213, 2, 0.03) 0%, transparent 20%),
      radial-gradient(circle at 90% 80%, rgba(255, 213, 2, 0.03) 0%, transparent 20%);
    pointer-events: none;
  }

  .max-w-4xl {
    animation: fadeIn 0.8s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .profile-header {
    position: relative;
    overflow: hidden;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .profile-header:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
  }

  .profile-cover {
    height: 200px;
    background: linear-gradient(135deg, #2A2F35 0%, #1A1E23 100%);
    position: relative;
    overflow: hidden;
  }

  .profile-cover::before {
    content: '';
    position: absolute;
    top: -50px;
    left: -50px;
    width: 150px;
    height: 150px;
    background: #ffd502;
    opacity: 0.05;
    border-radius: 50%;
    z-index: 1;
    animation: float 15s ease-in-out infinite;
  }

  .profile-cover::after {
    content: '';
    position: absolute;
    bottom: -50px;
    right: -50px;
    width: 150px;
    height: 150px;
    background: #ffd502;
    opacity: 0.1;
    border-radius: 50%;
    z-index: 1;
    animation: float 20s ease-in-out infinite reverse;
  }

  @keyframes float {
    0% {
      transform: translate(0, 0) rotate(0deg);
    }

    50% {
      transform: translate(20px, 20px) rotate(5deg);
    }

    100% {
      transform: translate(0, 0) rotate(0deg);
    }
  }

  .profile-avatar {
    position: relative;
    margin-top: -75px;
    z-index: 2;
  }

  .profile-avatar img {
    border: 4px solid white;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .profile-avatar img:hover {
    transform: scale(1.05);
    box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
  }

  .profile-role-badge {
    position: absolute;
    bottom: 0;
    right: 0;
    background: #ffd502;
    color: #2A2F35;
    font-weight: 600;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    transform: translateY(50%);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .profile-role-badge:hover {
    transform: translateY(50%) scale(1.05);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  }

  .profile-info {
    padding: 2rem;
    background: white;
    border-radius: 0 0 20px 20px;
  }

  .profile-name {
    font-size: 1.75rem;
    font-weight: 700;
    color: #2A2F35;
    margin-bottom: 0.5rem;
    transition: color 0.3s ease;
  }

  .profile-header:hover .profile-name {
    color: #ffd502;
  }

  .profile-bio {
    color: #4A5568;
    line-height: 1.7;
    margin-bottom: 1.5rem;
  }

  .profile-social {
    display: flex;
    gap: 1rem;
    margin-top: 1.5rem;
  }

  .social-link {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #F7F9FC;
    color: #4A5568;
    transition: all 0.3s ease;
  }

  .social-link:hover {
    background: #ffd502;
    color: #2A2F35;
    transform: translateY(-3px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .profile-section {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    margin-top: 2rem;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .profile-section:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
  }

  .profile-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 0;
    background: #ffd502;
    transition: height 0.3s ease;
  }

  .profile-section:hover::before {
    height: 100%;
  }

  .section-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #2A2F35;
    margin-bottom: 1.5rem;
    position: relative;
    display: inline-block;
  }

  .section-title::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -8px;
    width: 40px;
    height: 3px;
    background: #ffd502;
    border-radius: 2px;
    transition: width 0.3s ease;
  }

  .profile-section:hover .section-title::after {
    width: 100%;
  }

  .detail-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 1.5rem;
    transition: transform 0.3s ease;
  }

  .detail-item:hover {
    transform: translateX(5px);
  }

  .detail-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #F7F9FC;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    color: #ffd502;
    transition: all 0.3s ease;
    flex-shrink: 0;
  }

  .detail-item:hover .detail-icon {
    background: #ffd502;
    color: #2A2F35;
    transform: rotate(15deg);
  }

  .detail-content {
    flex: 1;
  }

  .detail-label {
    font-size: 0.875rem;
    color: #718096;
    margin-bottom: 0.25rem;
  }

  .detail-value {
    font-weight: 600;
    color: #2A2F35;
  }

  .post-card {
    background: white;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .post-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
  }

  .post-image {
    height: 200px;
    overflow: hidden;
  }

  .post-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .post-card:hover .post-image img {
    transform: scale(1.1);
  }

  .post-content {
    padding: 1.5rem;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .post-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: #2A2F35;
    margin-bottom: 0.75rem;
    transition: color 0.3s ease;
  }

  .post-card:hover .post-title {
    color: #ffd502;
  }

  .post-excerpt {
    color: #718096;
    margin-bottom: 1.5rem;
    flex: 1;
  }

  .post-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.875rem;
    color: #A0AEC0;
  }

  .post-date {
    display: flex;
    align-items: center;
  }

  .post-date i {
    margin-right: 0.5rem;
  }

  .post-link {
    display: inline-flex;
    align-items: center;
    color: #ffd502;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .post-link i {
    margin-left: 0.5rem;
    transition: transform 0.3s ease;
  }

  .post-link:hover {
    color: #d4b000;
  }

  .post-link:hover i {
    transform: translateX(3px);
  }

  .empty-state {
    text-align: center;
    padding: 3rem 2rem;
    background: #F7F9FC;
    border-radius: 16px;
    border: 2px dashed #E2E8F0;
  }

  .empty-state i {
    font-size: 3rem;
    color: #CBD5E0;
    margin-bottom: 1rem;
    display: block;
  }

  .empty-state-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #4A5568;
    margin-bottom: 0.5rem;
  }

  .empty-state-text {
    color: #718096;
  }

  /* Animation for posts grid */
  .grid>div {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s ease forwards;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

<div class="min-h-screen py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-4xl mx-auto">
    <!-- Profile Header -->
    <div class="profile-header">
      <div class="profile-cover"></div>
      <div class="profile-info">
        <div class="flex flex-col md:flex-row md:items-end">
          <div class="profile-avatar">
            <img src="{{ profile.image.url }}" alt="{{ profile.user.username }}"
              class="w-32 h-32 rounded-full object-cover">
            {% if profile.role %}
            <div class="profile-role-badge">{{ profile.role }}</div>
            {% endif %}
          </div>
          <div class="md:ml-6 mt-4 md:mt-0 flex-1">
            <h1 class="profile-name">{{ profile.user.get_full_name|default:profile.user.username }}</h1>
            <p class="profile-bio">{{ profile.bio|default:"No bio provided yet." }}</p>

            <div class="profile-social">
              {% if profile.linkedin_link %}
              <a href="{{ profile.linkedin_link }}" target="_blank" class="social-link" title="LinkedIn">
                <i class="fab fa-linkedin-in"></i>
              </a>
              {% endif %}

              {% if profile.facebook_link %}
              <a href="{{ profile.facebook_link }}" target="_blank" class="social-link" title="Facebook">
                <i class="fab fa-facebook-f"></i>
              </a>
              {% endif %}

              {% if profile.instagram_link %}
              <a href="{{ profile.instagram_link }}" target="_blank" class="social-link" title="Instagram">
                <i class="fab fa-instagram"></i>
              </a>
              {% endif %}

              {% if profile.website %}
              <a href="{{ profile.website }}" target="_blank" class="social-link" title="Website">
                <i class="fas fa-globe"></i>
              </a>
              {% endif %}
              {% if user == profile_user %}
              <a href="{% url 'profile'  %}" class="social-link" aria-label="Account Settings">
                <i class="fas fa-cog "></i>
              </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Information -->
    <div class="profile-section">
      <h2 class="section-title">Contact Information</h2>

      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-envelope"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Email</div>
          <div class="detail-value">{{ profile.user.email }}</div>
        </div>
      </div>

      {% if profile.phone_number %}
      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-phone"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Phone</div>
          <div class="detail-value">{{ profile.phone_number }}</div>
        </div>
      </div>
      {% endif %}

      {% if profile.location %}
      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-map-marker-alt"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Location</div>
          <div class="detail-value">{{ profile.location }}</div>
        </div>
      </div>
      {% endif %}
    </div>

    <!-- Role-specific Information -->
    {% if profile.role %}
    <div class="profile-section">
      <h2 class="section-title">
        {% if profile.role == 'Startup' %}
        Startup Details
        {% elif profile.role == 'Freelancer' %}
        Freelancer Details
        {% elif profile.role == 'Investor' %}
        Investor Details
        {% elif profile.role == 'Project_holder' %}
        Project Details
        {% endif %}
      </h2>

      {% if profile.role == 'Startup' %}
      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-building"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Company Name</div>
          <div class="detail-value">{{ profile.company_name }}</div>
        </div>
      </div>

      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-industry"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Industry</div>
          <div class="detail-value">{{ profile.industry }}</div>
        </div>
      </div>

      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-chart-line"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Stage</div>
          <div class="detail-value">{{ profile.stage }}</div>
        </div>
      </div>

      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Team Size</div>
          <div class="detail-value">{{ profile.team_size }}</div>
        </div>
      </div>

      {% elif profile.role == 'Freelancer' %}
      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-tools"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Skills</div>
          <div class="detail-value">{{ profile.skills }}</div>
        </div>
      </div>

      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-briefcase"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Experience</div>
          <div class="detail-value">{{ profile.experience }} years</div>
        </div>
      </div>

      {% if profile.portfolio_link %}
      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-folder-open"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Portfolio</div>
          <div class="detail-value">
            <a href="{{ profile.portfolio_link }}" target="_blank"
              class="text-blue-600 hover:text-blue-800 hover:underline">
              View Portfolio <i class="fas fa-external-link-alt ml-1 text-xs"></i>
            </a>
          </div>
        </div>
      </div>
      {% endif %}

      {% elif profile.role == 'Investor' %}
      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-bullseye"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Investment Focus</div>
          <div class="detail-value">{{ profile.investment_focus }}</div>
        </div>
      </div>

      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-chart-line"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Investment Stage</div>
          <div class="detail-value">{{ profile.investment_stage }}</div>
        </div>
      </div>

      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-dollar-sign"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Investment Range</div>
          <div class="detail-value">{{ profile.investment_range }}</div>
        </div>
      </div>

      {% elif profile.role == 'Project_holder' %}
      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-lightbulb"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Project Name</div>
          <div class="detail-value">{{ profile.project_name }}</div>
        </div>
      </div>

      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-align-left"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Project Description</div>
          <div class="detail-value">{{ profile.project_description }}</div>
        </div>
      </div>

      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-calendar-alt"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Project Timeline</div>
          <div class="detail-value">{{ profile.project_timeline }}</div>
        </div>
      </div>

      <div class="detail-item">
        <div class="detail-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="detail-content">
          <div class="detail-label">Looking For</div>
          <div class="detail-value">{{ profile.looking_for }}</div>
        </div>
      </div>
      {% endif %}
    </div>
    {% endif %}

    <!-- User's Posts -->
    <div class="profile-section">
      <h2 class="text-2xl font-bold mb-4 border-b-2 border-[#ffd502] pb-2 pl-4 mt-4">
        My Posts ({{ user_posts.count }})
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
        {% for post in user_posts %}
        <div class="post-card ">
      
          {% include 'blog/includes/PostCard.html' with post=post %}
        </div>
        {% empty %}
        <div class="empty-state grid grid-cols-1">
          <i class="far fa-newspaper"></i>
          <h3 class="empty-state-title">No Posts Yet</h3>
          <p class="empty-state-text">This user hasn't published any posts yet.</p>
        </div>
         <div class="empty-state grid grid-cols-1">
          <i class="far fa-newspaper"></i>
          <h3 class="empty-state-title">No Posts Yet</h3>
          <p class="empty-state-text">This user hasn't published any posts yet.</p>
        </div>

         
        {% endfor %}
      </div>
    
      </div>


    </div>
  </div>
</div>

<script>
  // Add intersection observer for smoother animations when scrolling
  document.addEventListener('DOMContentLoaded', function () {
    const sections = document.querySelectorAll('.profile-section');
    const posts = document.querySelectorAll('.grid > div');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });

    sections.forEach(section => {
      observer.observe(section);
    });

    posts.forEach(post => {
      observer.observe(post);
    });
  });
</script>
{% endblock %}